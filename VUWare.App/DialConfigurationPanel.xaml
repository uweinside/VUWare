<UserControl x:Class="VUWare.App.DialConfigurationPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             Background="#2a2a2a"
             Foreground="#CCCCCC">
    <Border Background="#1a1a1a" BorderBrush="#444444" BorderThickness="1" CornerRadius="4" Padding="15" Margin="0,0,0,15">
        <StackPanel>
            <!-- Dial Header with Enable Toggle -->
            <Grid Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding DisplayName, FallbackValue='Dial Configuration'}" 
                           FontSize="14" FontWeight="Bold" Foreground="#FFFFFF" VerticalAlignment="Center" Grid.Column="0"/>
                <CheckBox x:Name="EnabledCheckBox" IsChecked="{Binding Enabled}" 
                         VerticalAlignment="Center" Grid.Column="1" Foreground="#CCCCCC" Content="Enabled"/>
            </Grid>

            <!-- Sensor Configuration Section -->
            <TextBlock Text="Sensor Configuration" FontSize="12" FontWeight="Bold" Foreground="#FFFF99" Margin="0,0,0,10"/>
            
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Display Name:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <TextBox x:Name="DisplayNameTextBox" Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}" 
                        Width="200" Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Sensor Name:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <TextBox x:Name="SensorNameTextBox" Text="{Binding SensorName, UpdateSourceTrigger=PropertyChanged}" 
                        Width="300" Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Entry Name:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <TextBox x:Name="EntryNameTextBox" Text="{Binding EntryName, UpdateSourceTrigger=PropertyChanged}" 
                        Width="200" Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <!-- Display Format Section -->
            <TextBlock Text="Display Settings" FontSize="12" FontWeight="Bold" Foreground="#FFFF99" Margin="0,10,0,10"/>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Display Format:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <ComboBox x:Name="DisplayFormatComboBox" ItemsSource="{Binding DisplayFormats}" 
                         SelectedItem="{Binding DisplayFormat}" Width="150" Height="25" 
                         Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Display Unit:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <TextBox x:Name="DisplayUnitTextBox" Text="{Binding DisplayUnit, UpdateSourceTrigger=PropertyChanged}" 
                        Width="100" Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <!-- Value Range Section -->
            <TextBlock Text="Value Range" FontSize="12" FontWeight="Bold" Foreground="#FFFF99" Margin="0,10,0,10"/>

            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label"/>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="100"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Min Value:" VerticalAlignment="Center" Foreground="#CCCCCC" Grid.Row="0" Grid.Column="0"/>
                <TextBox x:Name="MinValueTextBox" Text="{Binding MinValue, UpdateSourceTrigger=PropertyChanged}" 
                        Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444" Grid.Row="0" Grid.Column="1"/>

                <TextBlock Text="Max Value:" VerticalAlignment="Center" Foreground="#CCCCCC" Grid.Row="0" Grid.Column="2" Margin="15,0,0,0"/>
                <TextBox x:Name="MaxValueTextBox" Text="{Binding MaxValue, UpdateSourceTrigger=PropertyChanged}" 
                        Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444" Grid.Row="0" Grid.Column="3"/>

                <TextBlock Text="Warning Threshold:" VerticalAlignment="Center" Foreground="#CCCCCC" Grid.Row="1" Grid.Column="0" Margin="0,8,0,0"/>
                <TextBox x:Name="WarningThresholdTextBox" Text="{Binding WarningThreshold, UpdateSourceTrigger=PropertyChanged}" 
                        Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444" Grid.Row="1" Grid.Column="1" Margin="0,8,0,0"/>

                <TextBlock Text="Critical Threshold:" VerticalAlignment="Center" Foreground="#CCCCCC" Grid.Row="1" Grid.Column="2" Margin="15,8,0,0"/>
                <TextBox x:Name="CriticalThresholdTextBox" Text="{Binding CriticalThreshold, UpdateSourceTrigger=PropertyChanged}" 
                        Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444" Grid.Row="1" Grid.Column="3" Margin="15,8,0,0"/>

                <TextBlock Text="Update Interval (ms):" VerticalAlignment="Center" Foreground="#CCCCCC" Grid.Row="2" Grid.Column="0" Margin="0,8,0,0"/>
                <TextBox x:Name="UpdateIntervalTextBox" Text="{Binding UpdateIntervalMs, UpdateSourceTrigger=PropertyChanged}" 
                        Height="25" Padding="8" Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444" Grid.Row="2" Grid.Column="1" Margin="0,8,0,0"/>
            </Grid>

            <!-- Color Configuration Section -->
            <TextBlock Text="Color Configuration" FontSize="12" FontWeight="Bold" Foreground="#FFFF99" Margin="0,10,0,10"/>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Color Mode:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <ComboBox x:Name="ColorModeComboBox" ItemsSource="{Binding ColorModes}" 
                         SelectedItem="{Binding ColorMode}" Width="150" Height="25" 
                         Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <!-- Static Color (visible when ColorMode == "static") -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10" 
                       Visibility="{Binding ColorMode, Converter={StaticResource ColorModeToVisibilityConverter}, ConverterParameter=static}">
                <TextBlock Text="Static Color:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                <ComboBox x:Name="StaticColorComboBox" ItemsSource="{Binding AvailableColors}" 
                         SelectedItem="{Binding StaticColor}" Width="150" Height="25" 
                         Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
            </StackPanel>

            <!-- Threshold Colors (visible when ColorMode == "threshold") -->
            <StackPanel Visibility="{Binding ColorMode, Converter={StaticResource ColorModeToVisibilityConverter}, ConverterParameter=threshold}">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Normal Color:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                    <ComboBox x:Name="NormalColorComboBox" ItemsSource="{Binding AvailableColors}" 
                             SelectedItem="{Binding NormalColor}" Width="150" Height="25" 
                             Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Warning Color:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                    <ComboBox x:Name="WarningColorComboBox" ItemsSource="{Binding AvailableColors}" 
                             SelectedItem="{Binding WarningColor}" Width="150" Height="25" 
                             Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Critical Color:" VerticalAlignment="Center" Foreground="#CCCCCC" Width="140"/>
                    <ComboBox x:Name="CriticalColorComboBox" ItemsSource="{Binding AvailableColors}" 
                             SelectedItem="{Binding CriticalColor}" Width="150" Height="25" 
                             Background="#2a2a2a" Foreground="#CCCCCC" BorderBrush="#444444"/>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>
